---
apiVersion: api.cerbos.dev/v1
description: |-
  Common dynamic roles used within GoFundMe
derivedRoles:
  name: common_roles
  definitions:
  - name: USER
    parentRoles: ["PERSON"]
    condition:
      match:
        expr: request.resource.attr.ownerId == request.principal.id
  # - name: ORGANIZER
  #   parentRoles: ["USER"]
  #   condition:
  #     match:
  #       expr: request.resource.attr.ownerId == request.principal.id
  # - name: TEAM_MEMBER
  #   parentRoles: ["USER"]
  #   condition:
  #     match:
  #       expr: request.principal.attr.department == "FINANCE"
  # - name: BENEFICIARY
  #   parentRoles: ["USER"]
  #   condition:
  #     match:
  #       expr: request.resource.attr.region == request.principal.attr.region

# How do we determine if someone one is a USER
  # or specifically an Organizer, Team Member or Bene?